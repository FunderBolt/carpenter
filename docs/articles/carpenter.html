<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to carpenter • carpenter</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">carpenter</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/carpenter.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/lwjohnst86/carpenter">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Introduction to carpenter</h1>
                        <h4 class="author">Luke W. Johnston</h4>
            
            <h4 class="date">2017-07-28</h4>
          </div>

    
    
<div class="contents">
<blockquote>
<p>Note: At present, carpenter only creates tables that you would typically see as the ‘basic characteristics’ or ‘descriptive statistics’ table in most biomedical articles. The plan is to include other common table structures, but they haven’t been implemented yet. If you have any suggestions, let me know as an <a href="https://github.com/lwjohnst86/carpenter/issues/new">Issue</a>!</p>
</blockquote>
<p>In biomedical research, there are certain types of tables that are often included in the article. For instance, some basic statistics between the treatment and control group. Or maybe it is between males and females, before and after an intervention, and so on. Often these tables are a hassle to create and are prone to needing updates based on slight changes in the data or from reviewer comments. carpenter was designed to make creating these tables easily and for them to be easily updated when data changes.</p>
<div id="minor-caveatconsideration" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-caveatconsideration" class="anchor"></a>Minor caveat/consideration</h2>
<p>Before going over the code, I should mention a key note and assumption: how the table is eventually presented is determined by how the data looks when it is passed into the carpenter functions. A good example is ‘before and after’ studies, where researchers may store data where each row is the participant and the remaining columns being the before and after values of a measure (e.g. <code>Weight_before</code> and <code>Weight_after</code> as two columns). In this case, the data should <em>ideally</em> be formatted more like this:</p>
<table class="table">
<thead><tr class="header">
<th>ID</th>
<th>Visit</th>
<th>Weight</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Before</td>
<td>50</td>
</tr>
<tr class="even">
<td>1</td>
<td>After</td>
<td>54</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Before</td>
<td>65</td>
</tr>
<tr class="even">
<td>2</td>
<td>After</td>
<td>70</td>
</tr>
</tbody>
</table>
<p>See how the data is stored in ‘long’ format. This is the form of data that carpenter was designed to deal with. For more details on what is tidy data see resources at the end.</p>
</div>
<div id="code-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#code-usage" class="anchor"></a>Code usage</h2>
<p>The underlying design principal for carpenter is that you create an outline of what the table should look like before finally creating the table. This is how carpenters also work: they sketch what the product will look like before actually starting to build anything. There are four ‘outlining’ functions, several carpenter statistics functions, and one final ‘building’ function:</p>
<ul>
<li>
<code><a href="../reference/outline_table.html">outline_table()</a></code> starts the outlining process.</li>
<li>
<code><a href="../reference/add_rows.html">add_rows()</a></code> adds variables to the row or rows with associated descriptive statistics.</li>
<li>
<code>stat_*()</code> type statistic functions to be used with <code><a href="../reference/add_rows.html">add_rows()</a></code> (a list of available statistics can be found using <code><a href="http://www.rdocumentation.org/packages/carpenter/topics/table_stats">?carpenter::table_stats</a></code>).</li>
<li>
<code><a href="../reference/renaming.html">renaming()</a></code> for customizing the naming of the rows and table headers.</li>
<li>
<code>build-table()</code> for finally building the table (uses the <a href="http://rapporter.github.io/pander/"><code>pander</code></a> package).</li>
</ul>
<p>These functions are chained together using the wonderful <a href="https://cran.r-project.org/package=magrittr">magrittr</a> <code>%&gt;%</code> pipe. If you’ve never used this package or the pipe, take a look at the vignette on introducing it. So, let’s do some coding:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(magrittr)
<span class="kw">library</span>(carpenter)
<span class="kw">head</span>(iris)</code></pre></div>
<pre><code>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
#&gt; 1          5.1         3.5          1.4         0.2  setosa
#&gt; 2          4.9         3.0          1.4         0.2  setosa
#&gt; 3          4.7         3.2          1.3         0.2  setosa
#&gt; 4          4.6         3.1          1.5         0.2  setosa
#&gt; 5          5.0         3.6          1.4         0.2  setosa
#&gt; 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/outline_table.html">outline_table</a></span>(iris, <span class="st">'Species'</span>) </code></pre></div>
<pre><code>#&gt; # A tibble: 0 x 0</code></pre>
<p>You’ll notice that the <code>outline_table</code> function returned a <code>tibble</code> of 0 rows and 0 columns. That’s because we haven’t added anything else to the table! carpenter is waiting for more information. So we add rows by:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/outline_table.html">outline_table</a></span>(iris, <span class="st">'Species'</span>) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/add_rows.html">add_rows</a></span>(<span class="st">'Sepal.Length'</span>, stat_meanSD) </code></pre></div>
<pre><code>#&gt; # A tibble: 1 x 4
#&gt;      Variables    setosa versicolor virginica
#&gt;          &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;
#&gt; 1 Sepal.Length 5.0 (0.4)  5.9 (0.5) 6.6 (0.6)</code></pre>
<p>You see it has now added a row to the table. Adding more rows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/outline_table.html">outline_table</a></span>(iris, <span class="st">'Species'</span>) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/add_rows.html">add_rows</a></span>(<span class="kw">c</span>(<span class="st">'Sepal.Length'</span>, <span class="st">'Petal.Length'</span>), stat_meanSD) %&gt;%
<span class="st">    </span><span class="kw"><a href="../reference/add_rows.html">add_rows</a></span>(<span class="st">'Sepal.Width'</span>, stat_medianIQR) </code></pre></div>
<pre><code>#&gt; # A tibble: 3 x 4
#&gt;      Variables        setosa    versicolor     virginica
#&gt;          &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;
#&gt; 1 Sepal.Length     5.0 (0.4)     5.9 (0.5)     6.6 (0.6)
#&gt; 2 Petal.Length     1.5 (0.2)     4.3 (0.5)     5.6 (0.6)
#&gt; 3  Sepal.Width 3.4 (3.2-3.7) 2.8 (2.5-3.0) 3.0 (2.8-3.2)</code></pre>
<p>See how this can make creating these tables very easy. Let’s remove the <code>.</code> from the row names and fix up the table header names:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab &lt;-<span class="st"> </span><span class="kw"><a href="../reference/outline_table.html">outline_table</a></span>(iris, <span class="st">'Species'</span>) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/add_rows.html">add_rows</a></span>(<span class="kw">c</span>(<span class="st">'Sepal.Length'</span>, <span class="st">'Petal.Length'</span>), stat_meanSD) %&gt;%
<span class="st">    </span><span class="kw"><a href="../reference/add_rows.html">add_rows</a></span>(<span class="st">'Sepal.Width'</span>, stat_medianIQR)  %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/renaming.html">renaming</a></span>(<span class="st">'header'</span>, <span class="kw">c</span>(<span class="st">'Measures'</span>, <span class="st">'Setosa'</span>, <span class="st">'Versicolor'</span>, <span class="st">'Virginica'</span>)) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/renaming.html">renaming</a></span>(<span class="st">'rows'</span>, function(x) <span class="kw">gsub</span>(<span class="st">'</span><span class="ch">\\</span><span class="st">.'</span>, <span class="st">' '</span>, x))
tab</code></pre></div>
<pre><code>#&gt; # A tibble: 3 x 4
#&gt;       Measures        Setosa    Versicolor     Virginica
#&gt;          &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;
#&gt; 1 Sepal Length     5.0 (0.4)     5.9 (0.5)     6.6 (0.6)
#&gt; 2 Petal Length     1.5 (0.2)     4.3 (0.5)     5.6 (0.6)
#&gt; 3  Sepal Width 3.4 (3.2-3.7) 2.8 (2.5-3.0) 3.0 (2.8-3.2)</code></pre>
<p>And finally build the table into a Markdown format for easy insertion into <a href="http://rmarkdown.rstudio.com/">R Markdown documents</a>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/build_table.html">build_table</a></span>(tab)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Measures</th>
<th align="center">Setosa</th>
<th align="center">Versicolor</th>
<th align="center">Virginica</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Sepal Length</td>
<td align="center">5.0 (0.4)</td>
<td align="center">5.9 (0.5)</td>
<td align="center">6.6 (0.6)</td>
</tr>
<tr class="even">
<td align="left">Petal Length</td>
<td align="center">1.5 (0.2)</td>
<td align="center">4.3 (0.5)</td>
<td align="center">5.6 (0.6)</td>
</tr>
<tr class="odd">
<td align="left">Sepal Width</td>
<td align="center">3.4 (3.2-3.7)</td>
<td align="center">2.8 (2.5-3.0)</td>
<td align="center">3.0 (2.8-3.2)</td>
</tr>
</tbody>
</table>
<p>If you have factor/discrete data, you can even use include these variables:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr, <span class="dt">quietly =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>#&gt; 
#&gt; Attaching package: 'dplyr'</code></pre>
<pre><code>#&gt; The following objects are masked from 'package:stats':
#&gt; 
#&gt;     filter, lag</code></pre>
<pre><code>#&gt; The following objects are masked from 'package:base':
#&gt; 
#&gt;     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mtcars %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(
        <span class="dt">gear =</span> <span class="kw">as.factor</span>(gear),
        <span class="dt">vs =</span> <span class="kw">as.factor</span>(vs)
    ) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/outline_table.html">outline_table</a></span>(<span class="st">'vs'</span>) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/add_rows.html">add_rows</a></span>(<span class="st">'mpg'</span>, stat_meanSD) %&gt;%
<span class="st">    </span><span class="kw"><a href="../reference/add_rows.html">add_rows</a></span>(<span class="st">'drat'</span>, stat_medianIQR) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/add_rows.html">add_rows</a></span>(<span class="st">'gear'</span>, stat_nPct) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/renaming.html">renaming</a></span>(<span class="st">'header'</span>, <span class="kw">c</span>(<span class="st">'Measures'</span>, <span class="st">'V-engine'</span>, <span class="st">'Straight engine'</span>)) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/renaming.html">renaming</a></span>(<span class="st">'rows'</span>, function(x) x %&gt;%<span class="st"> </span>
<span class="st">                 </span><span class="kw">gsub</span>(<span class="st">'drat'</span>, <span class="st">'Read axle ratio'</span>, .) %&gt;%<span class="st"> </span>
<span class="st">                 </span><span class="kw">gsub</span>(<span class="st">'mpg'</span>, <span class="st">'Miles/gallon'</span>, .) %&gt;%<span class="st"> </span>
<span class="st">                 </span><span class="kw">gsub</span>(<span class="st">'gear'</span>, <span class="st">'Number of gears'</span>, .)) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/build_table.html">build_table</a></span>()</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Measures</th>
<th align="center">V-engine</th>
<th align="center">Straight engine</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Miles/gallon</td>
<td align="center">16.6 (3.9)</td>
<td align="center">24.6 (5.4)</td>
</tr>
<tr class="even">
<td align="left">Read axle ratio</td>
<td align="center">3.2 (3.1-3.7)</td>
<td align="center">3.9 (3.7-4.1)</td>
</tr>
<tr class="odd">
<td align="left">Number of gears</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">- 3</td>
<td align="center">12 (66.7%)</td>
<td align="center">3 (21.4%)</td>
</tr>
<tr class="odd">
<td align="left">- 4</td>
<td align="center">2 (11.1%)</td>
<td align="center">10 (71.4%)</td>
</tr>
<tr class="even">
<td align="left">- 5</td>
<td align="center">4 (22.2%)</td>
<td align="center">1 (7.1%)</td>
</tr>
</tbody>
</table>
<p>Pretty easy eh?</p>
<p>Sometimes, though, you don’t need to compare multiple columns, but instead need to only show one column. Easy, just don’t include a header in the <code><a href="../reference/outline_table.html">outline_table()</a></code>!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/outline_table.html">outline_table</a></span>() %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/add_rows.html">add_rows</a></span>(<span class="st">'Sepal.Length'</span>, stat_meanSD) %&gt;%
<span class="st">    </span><span class="kw"><a href="../reference/add_rows.html">add_rows</a></span>(<span class="st">'Sepal.Width'</span>, stat_medianIQR) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/renaming.html">renaming</a></span>(<span class="st">'header'</span>, <span class="kw">c</span>(<span class="st">'Measures'</span>, <span class="st">'Values'</span>)) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/build_table.html">build_table</a></span>() </code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Measures</th>
<th align="center">Values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Sepal.Length</td>
<td align="center">5.8 (0.8)</td>
</tr>
<tr class="even">
<td align="left">Sepal.Width</td>
<td align="center">3.0 (2.8-3.3)</td>
</tr>
</tbody>
</table>
<p>If you don’t use R Markdown, you can continue the chain into <code>write.csv()</code>. Use the <code>finish = FALSE</code> argument to <code><a href="../reference/build_table.html">build_table()</a></code> to prevent the Markdown table from being created.!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/outline_table.html">outline_table</a></span>() %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/add_rows.html">add_rows</a></span>(<span class="st">'Sepal.Length'</span>, stat_meanSD) %&gt;%
<span class="st">    </span><span class="kw"><a href="../reference/add_rows.html">add_rows</a></span>(<span class="st">'Sepal.Width'</span>, stat_medianIQR) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/renaming.html">renaming</a></span>(<span class="st">'header'</span>, <span class="kw">c</span>(<span class="st">'Measures'</span>, <span class="st">'Values'</span>)) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../reference/build_table.html">build_table</a></span>(<span class="dt">finish =</span> <span class="ot">FALSE</span>) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw">write.csv</span>(<span class="st">'table1.csv'</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>)</code></pre></div>
</div>
<div id="resources" class="section level1">
<h1 class="hasAnchor">
<a href="#resources" class="anchor"></a>Resources:</h1>
<ul>
<li>Tidy data:
<ul>
<li><a href="http://vita.had.co.nz/papers/tidy-data.pdf">Hadley Wickham’s tidy data article</a></li>
<li><a href="http://stats.stackexchange.com/questions/83614/best-practices-for-creating-tidy-data">CrossValidated Q&amp;A list of ‘best practices’</a></li>
<li><a href="http://garrettgman.github.io/tidying/">Garrett Grolemund’s (member of RStudio) blog post</a></li>
</ul>
</li>
<li>Other table customizing packages (but not builders):
<ul>
<li><a href="http://rapporter.github.io/pander/"><code>pander</code></a></li>
<li><a href="https://cran.r-project.org/package=pixiedust"><code>pixiedust</code></a></li>
<li>
<a href="https://cran.r-project.org/package=stargazer"><code>stargazer</code></a> (<a href="http://jakeruss.com/cheatsheets/stargazer.html">tutorial</a>)</li>
<li><a href="https://cran.r-project.org/package=htmlTable"><code>htmlTable</code></a></li>
<li><a href="https://cran.r-project.org/package=tableone"><code>tableone</code></a></li>
</ul>
</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#minor-caveatconsideration">Minor caveat/consideration</a></li>
      <li><a href="#code-usage">Code usage</a></li>
      <li><a href="#resources">Resources:</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Luke Johnston.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
